parameters:
  workingDirectory: ''

steps:
- template: terraform-init.yml
  parameters:
    workingDirectory: ${{ parameters.workingDirectory }}

- task: ms-devlabs.custom-terraform-tasks.custom-terraform-release-task.TerraformTaskV4@4
  displayName: 'Terraform : Plan'
  inputs:
    command: plan
    environmentServiceNameAzureRM: 'Visual Studio Enterprise Subscription'
    backendAzureRmUseEnvironmentVariablesForAuthentication: false
    backendAzureRmUseEntraIdForAuthentication: false
    workingDirectory: ${{ parameters.workingDirectory }}
